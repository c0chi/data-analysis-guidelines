# ðŸ’» Data analysis 001 - Setup

- [Setting up your environment](#setting-up-your-environment)
  - [Install `pweave`](#install-pweave)
  - [Configure Atom](#configure-atom)
  - [Install LaTeX](#install-latex)
- [Organizing your analysis](#organizing-your-analysisa)

## Setting up your environment

There are few people who have no need of fiddling when writing analysis code
on the fly. If you aren't one of them, have no fear. The setup set forth in this
document optimizes your environment for interactive development, without having
build and rebuild your output document to check the axis labels on one chart.

### Install `pweave`

"Literate programming" is the process of bundling source code and documentation
into one package in service of legibility. By extension, "literate analysis"
combines analytical code with narrative text in service of legiblity, as well
as transparency and reproducibility.

In the "literate X" nomenclature, code is compiled by "tangling" the combined
source document, and documentation is generated by "weaving." [`pweave` is a
Python library](http://mpastell.com/pweave/) for "weaving" and "tangling" source
files containing text and Python code blocks.

Installation is as simple as:

```
$ pip install pweave
```

`pweave` can be used as both a Python module and a command-line utility. So far,
we've found the CLI to fit most seamlessly into our Make-driven data pipeline.

For more on using `pweave`, head on over to [Data analysis 101](/using-the-toolkit.md).
Still setting up? Read on.

### Configure Atom

At DataMade, we all have our own preferences when it comes to code editors.
When it comes to analysis, Atom plays nicely with `pweave` to create an
interactive development environment that rivals [Jupyter notebooks](https://jupyter.org/) â€“
without the hassle of illegible diffs and highly customized file conversion
steps.

The bad news is that this environment still requires some configuration. The
good news is that one Denver data scientist [wrote an excellent guide](http://protips.maxmasnick.com/literate-python-setup-with-pweave-and-atom)
to that configuration.

A few amendments to the above walkthrough:

- Skip installing `expand-region`, and don't edit your `config.cson`. Don't add
`'cmd-shift-space': 'expand-region:expand'` to `keymap.cson`, either. Instead,
append the following to `keymap.cson`:

    ```
    'cmd-enter': 'hydrogen:run'
    'shift-enter': 'hydrogen:run-cell'
    ```

    As you might suspect, you can now run the selected line of code with
    `command + enter`, or run the selected cell with `shift + enter`.

- In the Hydrogen Kernel Mappings, specify `{'pweave markdown': 'Python 3'}`
rather than Python 2.

And a point bears repeating: If you are employing virtual environments (and
you should!), you must open Atom from the command line with `atom .` _after
activating your virtual environment_.

### Install LaTeX

LaTeX is essentially a document formatting markup language. Skip the muss
and fuss and licenses of popular GUI software. You, too, can produce beautiful
documents with only a few inline tags (think HTML) and useful macros (think
templating engines, like Jinja.

Installation is well-trodden ground. Follow the appropriate link for your
operating system:

- [GNU/Linux & Windows](http://www.tug.org/texlive/)
- [OS X](www.tug.org/mactex/)

## Organizing your analysis

Data making and analysis may live in the same repository, or an analysis
repository [may list a data making repository as a submodule](https://github.com/City-Bureau/chicago-lead).

Either way, analysis files should generally be organized as follows:

```
â”œâ”€â”€ README.md - instructions for making your data and analysis
â”œâ”€â”€ raw
â”‚Â Â  â””â”€â”€ raw data
â”œâ”€â”€ documentation
â”‚Â Â  â””â”€â”€ documentation of raw data
â”œâ”€â”€ intermediate
â”‚Â Â  â””â”€â”€ local copies of intermediate generated data, i.e. static source data downloaded from third-party
â”œâ”€â”€ scripts
â”‚Â Â  â””â”€â”€ custom transformation scripts
â”œâ”€â”€ data
â”‚Â Â  â””â”€â”€ generated data
â”œâ”€â”€ analyses
â”‚Â Â  â””â”€â”€ raw and generated analysis files
â”œâ”€â”€ requirements.txt
â””â”€â”€ Makefile
```
